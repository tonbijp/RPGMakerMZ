# TF_LayeredMap.js 説明書

このプラグインは以下の機能を提供します。

1. [☆]+[通行設定(4方向)]で、B〜Eタイルの重なり機能を追加。
2. [地形タグ]で、B〜Eタイルの立体交差機能を追加。
3. [カウンター]で、A3・A4タイルに回り込み機能を追加。
4. [地形タグ]で、A3・A4タイルに橋の衝突判定と立体交差機能を追加。
5. [カウンター] [地形タグ] で、A3・A4タイル上面に立体交差機能を追加。
6. [地形タグ] [×] で、A4上面タイルに上を歩かない壁用の設定。
8. <TF_zDef:数値> をイベントのメモに記入して重なりの調整。
9. <TF_higherLevel:真偽値> をイベントのメモに記入して立体交差の奥手前の指定。
10. TF_HIGHER_LEVEL コマンドで立体交差の奥手前の指定。

特に 1. の中でも「↑←→・」と↓方向のみ移動不可の設定したものは、このプラグインの価値の90%を占めると言っても過言ではないでしょう。

## プラグインパラメータ
  
### 奥行き優先度
書き割りはキャラクタと同じレイヤーに配置されるが、その際にキャラクターより手前に配置されるか、奥に配置されるかを設定。

規定値の奥に配置される設定で特に問題はない。

### オートタイル
#### カウンター回り込み
接客するには、カウンターから遠すぎる!!
そんな時に、一歩前に出てカウンターのそばに配置できる設定。
(要 HalfMove.js)
HalfMove.js の設定で、<>を設定しておくと、一歩南に踏み出すのでちょうどいい感じになります。


[タイル全体を通行不可]

南側が ⊓ という感じに空いている
@param IsA3UpperOpen
@type boolean
@on 南を開く
@off 閉じて内側は通行可(規定値)
@text 屋根南を開くか
@desc A3(屋根)[周囲=通行不可]の場合に、南の衝突判定をなくすか
@default false
@parent Autotile

@param IsA4UpperOpen
@type boolean
@on 南を開く(規定値)
@off 閉じて内側は通行可
@text 壁上面南を開くか
@desc A4(壁上上面)[周囲=通行不可]の場合に、南の衝突判定をなくすか
@default true
@parent Autotile


@param Overpass
@text 立体交差

@param OverpassTerrainTag
@type number
@min 0
@max 7
@text 立体交差の地形タグ
@desc 立体交差不使用 : 0
立体交差をさせたいタイルに指定する地形タグ(規定値:3)
@default 3
@parent Overpass

@param CharacterSize
@type select
@option 1タイルサイズ
@value 1
@option 2タイルサイズ
@value 2
@desc Collision of overpass for.
@text キャラのタイルサイズ
@desc 立体交差の衝突判定用のキャラサイズ(規定値:1タイルサイズ)
@default 1
@parent Overpass


@help 
注意 : トリアコンタンさんの HalfMove.js を利用する場合は。
TF_LayeredMap.js の前に HalfMove.js を配置するようにしてください。
TF_Undulation.js と一緒の場合は、TF_LayeredMap.js が前です。


1. B〜Eタイルに[☆]を指定したあと、[通行設定(4方向)]
     0x0 ↑→←↓ : [☆] 設定、全方向に 通行可(プラグインなしと同じ)
     0x1 ↑→←・ : 書き割り、北　西東 通行可、1階 【基本、柵とか】
     0x2 ↑→・↓ : 書き割り、北南　東 通行可、1階 （柵の西側とか）┃
     0x3 ↑→・・ : 書き割り、北　　東 通行可、1階 （柵の西南とか）┗
     0x4 ↑・←↓ : 書き割り、北南西　 通行可、1階 （柵の東側とか）   ┃
     0x5 ↑・←・ : 書き割り、北　西　 通行可、1階 （柵の東南とか）   ┛
     0x6 ↑・・↓ : 書き割り、北南　　 通行可、1階 （両脇に木とか）┃┃
     0x7 ↑・・・ : 書き割り、北　　　 通行可、1階 （張り出し的な）┗┛
     0x8 ・→←↓ : 書き割り、全方向に 通行可、1階 （草むらなどに）
     0x9 ・→←・ : 書き割り、全方向に 通行可、2階
     0xA ・→・↓ : 書き割り、全方向に 通行可、3階
     0xB ・→・・ : 地面[○] 設定かつ北半分通行不可 （棚などに）(HalfMove.js が必要)
     0xC ・・←↓ : 0x1 と同じだが南半分が通行不可 （机などに）(HalfMove.js が必要)
     0xD ・・←・ : 0xB と同じだが北の両脇が通行可 （根元とか）(HalfMove.js が必要)
     0xE ・・・↓ : 0xC と同じだが南の両脇が通行可 （椅子とか）(HalfMove.js が必要)
     0xF ・・・・ : 0x1 と同じだが南の両脇が通行可 （杭などに）(HalfMove.js が必要)

2. [地形タグ]を3(規定値)に設定
     通行設定で侵入可の方向から入ると上を通ります。
　侵入不可の方向から入ると下を通ります。

3. 崖など回り込み用
　[カウンター]設定
     A3・A4の奇数列(屋根・壁上面)
     　[○] 全体=高層[☆]
     A3・A4の偶数列(壁)
     　[○] 全体=回り込み、南方向は通行不可(壁の高さは自動調整)
     A3・A4に共通
     　[×] 北=回り込み、周囲=通行不可

4.  橋の立体交差や階段用
　[地形タグ:3]設定
     A3の奇数列(屋根)
         [○]南北=通行不可、東西=通行
         [×]南北=下通行、東西=上通行(立体交差)
     A3・A4の偶数列(壁)
         [○]南北=通行、東西=通行不可
         [×]南北=上通行、東西=下通行(立体交差)

5.  立体交差
　[カウンター] [地形タグ:3] 設定
     A3・A4の奇数列(屋根・壁上面)
         [○]全面立体交差
         [×]北=立体交差、周囲=通行不可

6.  上を歩かない壁用の設定
     A4の奇数列(壁上面)
         [地形タグ:3][×] 北=高層[☆]、全面通行不可

8. 重ね合わせの順番を調節
　<TF_zDef:数値> をイベントのメモに入力。
　数値はy位置に加えられて、仮想的にy位置をずらす。
　キャラ画像は標準環境でy方向に-6ずれているので、例えば8を入れると手前に表示される。

9. 立体交差の奥手前の指定
　<TF_higherLevel:真偽値> をイベントのメモに入力
　trueだと立体交差の手前(上)、falseだと奥(下)に配置される。
　規定値はfalse。

10. プラグインコマンドで立体交差の奥手前の指定。
　TF_HIGHER_LEVEL 真偽値 対象(省略可)
　対象は -2~-4:隊列キャラ、-1:プレイヤーキャラ、0:イベント自身(規定値)、1以降:イベントID

利用規約 : MITライセンス